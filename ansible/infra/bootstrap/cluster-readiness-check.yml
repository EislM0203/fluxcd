---
- name: Verify all Kubernetes nodes are ready
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Wait until all Kubernetes nodes are Ready
      ansible.builtin.command: kubectl wait --for=condition=Ready nodes --all --timeout=300s
      changed_when: false
      tags: [bootstrap, readiness]

    - name: Get node status
      ansible.builtin.command: kubectl get nodes
      register: node_status
      changed_when: false
      tags: [bootstrap, readiness]

    - name: Print node readiness summary
      ansible.builtin.debug:
        var: node_status.stdout_lines
      tags: [bootstrap, readiness]
